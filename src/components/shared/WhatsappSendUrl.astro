---
import Button from './Button.astro';
import { WHATSAPP } from "../../consts";

interface Props {
  text?: string;
  variant?: string;
  message?: string;
}

const { text = "Comprar", variant = "primary", message = "Me interesa este producto" } = Astro.props;
const currentUrl = Astro.url.href;
const encodedMessage = encodeURIComponent(`${message}: ${currentUrl}`);
const whatsappUrl = `https://wa.me/${WHATSAPP}?text=${encodedMessage}`;
---

<div style="
  display: flex;
  justify-content: center;
  margin: 2.5rem 0;
">
  <Button 
    text={text}
    url={whatsappUrl}
    variant={variant}
  />
</div>